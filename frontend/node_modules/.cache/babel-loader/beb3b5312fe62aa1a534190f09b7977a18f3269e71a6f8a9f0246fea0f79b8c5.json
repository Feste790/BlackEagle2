{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(_ref){let{setIsAuthenticated,apiUrl}=_ref;const[formData,setFormData]=useState({first_name:'',last_name:'',e_mail:'',username:'',password:''});const[error,setError]=useState('');const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{const response=await fetch(`${apiUrl}/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});if(!response.ok){const data=await response.json();throw new Error(data.error||'Błąd rejestracji');}const loginResponse=await fetch(`${apiUrl}/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({e_mail:formData.e_mail,password:formData.password})});if(!loginResponse.ok){const loginData=await loginResponse.json();throw new Error(loginData.error||'Nie udało się zalogować');}const loginData=await loginResponse.json();localStorage.setItem('access_token',loginData.access_token);// Zmieniono z 'token'\nsetIsAuthenticated(true);navigate('/movies');}catch(err){setError(err.message||'Wystąpił błąd podczas rejestracji');console.error('Błąd:',err);}};return/*#__PURE__*/_jsx(\"div\",{className:\"register-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login_logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/blackeaglelogo.png\",alt:\"Logo\",className:\"logo-image\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"formTitle\",children:\"Rejestracja\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',textAlign:'center'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"first_name\",className:\"imie\",placeholder:\"Imi\\u0119\",value:formData.first_name,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"last_name\",className:\"nazwisko\",placeholder:\"Nazwisko\",value:formData.last_name,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\"// Poprawiono typ na \"email\"\n,name:\"e_mail\",className:\"email\",placeholder:\"Email\",value:formData.e_mail,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",className:\"login\",placeholder:\"Nazwa u\\u017Cytkownika\",value:formData.username,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"password\",placeholder:\"Has\\u0142o\",value:formData.password,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submitButtonLogin\",children:\"Zarejestruj\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"linkreg\",children:[\"Masz ju\\u017C konto?\",' ',/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"text_register_acc\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text_register_acc_butt\",children:\"Zaloguj si\\u0119\"})})]})]})});}export default Register;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Register","_ref","setIsAuthenticated","apiUrl","formData","setFormData","first_name","last_name","e_mail","username","password","error","setError","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","data","json","Error","loginResponse","loginData","localStorage","setItem","access_token","err","message","console","className","children","src","alt","style","color","textAlign","onSubmit","type","placeholder","onChange","required","href"],"sources":["C:/Users/karol/source/repos/Feste790/BlackEagle-New/Black-Eagle/frontend/src/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Register({ setIsAuthenticated, apiUrl }) {\r\n    const [formData, setFormData] = useState({\r\n        first_name: '',\r\n        last_name: '',\r\n        e_mail: '',\r\n        username: '',\r\n        password: ''\r\n    });\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await fetch(`${apiUrl}/register`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(formData)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Błąd rejestracji');\r\n            }\r\n\r\n            const loginResponse = await fetch(`${apiUrl}/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    e_mail: formData.e_mail,\r\n                    password: formData.password\r\n                })\r\n            });\r\n\r\n            if (!loginResponse.ok) {\r\n                const loginData = await loginResponse.json();\r\n                throw new Error(loginData.error || 'Nie udało się zalogować');\r\n            }\r\n\r\n            const loginData = await loginResponse.json();\r\n            localStorage.setItem('access_token', loginData.access_token); // Zmieniono z 'token'\r\n            setIsAuthenticated(true);\r\n            navigate('/movies');\r\n        } catch (err) {\r\n            setError(err.message || 'Wystąpił błąd podczas rejestracji');\r\n            console.error('Błąd:', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"register-page\">\r\n            <div className=\"center\">\r\n                <div className=\"login_logo\">\r\n                    <img src=\"/blackeaglelogo.png\" alt=\"Logo\" className=\"logo-image\" />\r\n                </div>\r\n                <h2 className=\"formTitle\">Rejestracja</h2>\r\n                {error && <p style={{ color: 'red', textAlign: 'center' }}>{error}</p>}\r\n                <form onSubmit={handleSubmit}>\r\n                    <div>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"first_name\"\r\n                            className=\"imie\"\r\n                            placeholder=\"Imię\"\r\n                            value={formData.first_name}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"last_name\"\r\n                            className=\"nazwisko\"\r\n                            placeholder=\"Nazwisko\"\r\n                            value={formData.last_name}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <input\r\n                            type=\"email\" // Poprawiono typ na \"email\"\r\n                            name=\"e_mail\"\r\n                            className=\"email\"\r\n                            placeholder=\"Email\"\r\n                            value={formData.e_mail}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            className=\"login\"\r\n                            placeholder=\"Nazwa użytkownika\"\r\n                            value={formData.username}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <input\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            className=\"password\"\r\n                            placeholder=\"Hasło\"\r\n                            value={formData.password}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"submitButtonLogin\">\r\n                        Zarejestruj\r\n                    </button>\r\n                </form>\r\n                <p className=\"linkreg\">\r\n                    Masz już konto?{' '}\r\n                    <a href=\"/login\" className=\"text_register_acc\">\r\n                        <span className=\"text_register_acc_butt\">Zaloguj się</span>\r\n                    </a>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}