{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Watched=_ref=>{let{filteredMovies,apiUrl}=_ref;const[movies,setMovies]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchWatchedMovies=async()=>{try{const token=localStorage.getItem('access_token');if(!token){throw new Error('Brak tokenu autoryzacji');}const response=await fetch(`${apiUrl}/watched`,{method:'GET',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`}});if(!response.ok){throw new Error(`Błąd przy pobieraniu danych: ${response.status}`);}const data=await response.json();setMovies(data);setLoading(false);}catch(err){setError(err.message);setLoading(false);}};fetchWatchedMovies();},[apiUrl]);const formatPolishDate=dateString=>{if(!dateString)return'';const date=new Date(dateString);const months=['Stycznia','Lutego','Marca','Kwietnia','Maja','Czerwca','Lipca','Sierpnia','Września','Października','Listopada','Grudnia'];const day=date.getDate();const month=months[date.getMonth()];const year=date.getFullYear();return`${day} ${month} ${year}`;};if(loading)return/*#__PURE__*/_jsx(\"p\",{style:{color:'#f5c518',textAlign:'center'},children:\"\\u0141adowanie...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{style:{color:'#f5c518',textAlign:'center'},children:[\"B\\u0142\\u0105d: \",error]});const displayMovies=movies.length>0?movies:filteredMovies;return/*#__PURE__*/_jsxs(\"div\",{className:\"watched-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header_text_watched\",children:\"Obejrzane Filmy\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-list-watched\",children:displayMovies.map((movie,i)=>{var _movie$imdb_votes;return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-item-watched\",children:[/*#__PURE__*/_jsx(Link,{to:`/movie/${movie.movie_id}`,className:\"movie-poster-container\",children:/*#__PURE__*/_jsx(\"img\",{className:\"movie-poster-watched\",src:movie.poster||'https://via.placeholder.com/150x220',alt:movie.title||'Brak tytułu'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details-watched\",children:[/*#__PURE__*/_jsx(\"h2\",{children:movie.title||'Brak tytułu'}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Data premiery:\"}),\" \",formatPolishDate(movie.released)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"D\\u0142ugo\\u015B\\u0107 trwania:\"}),\" \",movie.runtime||'Brak danych',\" min\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Kraj pochodzenia:\"}),\" \",movie.country||'Brak danych']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"IMDb:\"}),\" \",movie.imdb_rating||'Brak danych',\" / 10 (\",((_movie$imdb_votes=movie.imdb_votes)===null||_movie$imdb_votes===void 0?void 0:_movie$imdb_votes.toLocaleString())||0,\" g\\u0142os\\xF3w)\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"movie-description-watched\",children:movie.plot||'Brak opisu'})]})]},movie.movie_id||i);})})]});};export default Watched;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Watched","_ref","filteredMovies","apiUrl","movies","setMovies","loading","setLoading","error","setError","fetchWatchedMovies","token","localStorage","getItem","Error","response","fetch","method","headers","Authorization","ok","status","data","json","err","message","formatPolishDate","dateString","date","Date","months","day","getDate","month","getMonth","year","getFullYear","style","color","textAlign","children","displayMovies","length","className","map","movie","i","_movie$imdb_votes","to","movie_id","src","poster","alt","title","released","runtime","country","imdb_rating","imdb_votes","toLocaleString","plot"],"sources":["C:/Users/karol/source/repos/Feste790/BlackEagle-New/Black-Eagle/frontend/src/Watched.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './App.css';\r\n\r\nconst Watched = ({ filteredMovies, apiUrl }) => {\r\n    const [movies, setMovies] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchWatchedMovies = async () => {\r\n            try {\r\n                const token = localStorage.getItem('access_token');\r\n                if (!token) {\r\n                    throw new Error('Brak tokenu autoryzacji');\r\n                }\r\n                const response = await fetch(`${apiUrl}/watched`, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`Błąd przy pobieraniu danych: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                setMovies(data);\r\n                setLoading(false);\r\n            } catch (err) {\r\n                setError(err.message);\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchWatchedMovies();\r\n    }, [apiUrl]);\r\n\r\n    const formatPolishDate = (dateString) => {\r\n        if (!dateString) return '';\r\n\r\n        const date = new Date(dateString);\r\n        const months = [\r\n            'Stycznia', 'Lutego', 'Marca', 'Kwietnia', 'Maja', 'Czerwca',\r\n            'Lipca', 'Sierpnia', 'Września', 'Października', 'Listopada', 'Grudnia',\r\n        ];\r\n\r\n        const day = date.getDate();\r\n        const month = months[date.getMonth()];\r\n        const year = date.getFullYear();\r\n\r\n        return `${day} ${month} ${year}`;\r\n    };\r\n\r\n    if (loading) return <p style={{ color: '#f5c518', textAlign: 'center' }}>Ładowanie...</p>;\r\n    if (error) return <p style={{ color: '#f5c518', textAlign: 'center' }}>Błąd: {error}</p>;\r\n\r\n    const displayMovies = movies.length > 0 ? movies : filteredMovies;\r\n\r\n    return (\r\n        <div className=\"watched-container\">\r\n            <h1 className=\"header_text_watched\">Obejrzane Filmy</h1>\r\n            <div className=\"movie-list-watched\">\r\n                {displayMovies.map((movie, i) => (\r\n                    <div className=\"movie-item-watched\" key={movie.movie_id || i}>\r\n                        <Link to={`/movie/${movie.movie_id}`} className=\"movie-poster-container\">\r\n                            <img\r\n                                className=\"movie-poster-watched\"\r\n                                src={movie.poster || 'https://via.placeholder.com/150x220'}\r\n                                alt={movie.title || 'Brak tytułu'}\r\n                            />\r\n                        </Link>\r\n                        <div className=\"movie-details-watched\">\r\n                            <h2>{movie.title || 'Brak tytułu'}</h2>\r\n                            <p>\r\n                                <strong>Data premiery:</strong> {formatPolishDate(movie.released)}\r\n                            </p>\r\n                            <p>\r\n                                <strong>Długość trwania:</strong> {movie.runtime || 'Brak danych'} min\r\n                            </p>\r\n                            <p>\r\n                                <strong>Kraj pochodzenia:</strong> {movie.country || 'Brak danych'}\r\n                            </p>\r\n                            <p>\r\n                                <strong>IMDb:</strong> {movie.imdb_rating || 'Brak danych'} / 10 (\r\n                                {movie.imdb_votes?.toLocaleString() || 0} głosów)\r\n                            </p>\r\n                            <p className=\"movie-description-watched\">{movie.plot || 'Brak opisu'}</p>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Watched;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnB,KAAM,CAAAC,OAAO,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,cAAc,CAAEC,MAAO,CAAC,CAAAF,IAAA,CACvC,KAAM,CAACG,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExCD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAiB,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAClD,GAAI,CAACF,KAAK,CAAE,CACR,KAAM,IAAI,CAAAG,KAAK,CAAC,yBAAyB,CAAC,CAC9C,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGb,MAAM,UAAU,CAAE,CAC9Cc,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAE,UAAUR,KAAK,EAClC,CACJ,CAAC,CAAC,CACF,GAAI,CAACI,QAAQ,CAACK,EAAE,CAAE,CACd,KAAM,IAAI,CAAAN,KAAK,CAAC,gCAAgCC,QAAQ,CAACM,MAAM,EAAE,CAAC,CACtE,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClClB,SAAS,CAACiB,IAAI,CAAC,CACff,UAAU,CAAC,KAAK,CAAC,CACrB,CAAE,MAAOiB,GAAG,CAAE,CACVf,QAAQ,CAACe,GAAG,CAACC,OAAO,CAAC,CACrBlB,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CACDG,kBAAkB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACP,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAuB,gBAAgB,CAAIC,UAAU,EAAK,CACrC,GAAI,CAACA,UAAU,CAAE,MAAO,EAAE,CAE1B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,UAAU,CAAC,CACjC,KAAM,CAAAG,MAAM,CAAG,CACX,UAAU,CAAE,QAAQ,CAAE,OAAO,CAAE,UAAU,CAAE,MAAM,CAAE,SAAS,CAC5D,OAAO,CAAE,UAAU,CAAE,UAAU,CAAE,cAAc,CAAE,WAAW,CAAE,SAAS,CAC1E,CAED,KAAM,CAAAC,GAAG,CAAGH,IAAI,CAACI,OAAO,CAAC,CAAC,CAC1B,KAAM,CAAAC,KAAK,CAAGH,MAAM,CAACF,IAAI,CAACM,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAAAC,IAAI,CAAGP,IAAI,CAACQ,WAAW,CAAC,CAAC,CAE/B,MAAO,GAAGL,GAAG,IAAIE,KAAK,IAAIE,IAAI,EAAE,CACpC,CAAC,CAED,GAAI7B,OAAO,CAAE,mBAAOT,IAAA,MAAGwC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAS,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,CAAC,mBAAY,CAAG,CAAC,CACzF,GAAIhC,KAAK,CAAE,mBAAOT,KAAA,MAAGsC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAS,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,EAAC,kBAAM,CAAChC,KAAK,EAAI,CAAC,CAExF,KAAM,CAAAiC,aAAa,CAAGrC,MAAM,CAACsC,MAAM,CAAG,CAAC,CAAGtC,MAAM,CAAGF,cAAc,CAEjE,mBACIH,KAAA,QAAK4C,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAC9B3C,IAAA,OAAI8C,SAAS,CAAC,qBAAqB,CAAAH,QAAA,CAAC,iBAAe,CAAI,CAAC,cACxD3C,IAAA,QAAK8C,SAAS,CAAC,oBAAoB,CAAAH,QAAA,CAC9BC,aAAa,CAACG,GAAG,CAAC,CAACC,KAAK,CAAEC,CAAC,QAAAC,iBAAA,oBACxBhD,KAAA,QAAK4C,SAAS,CAAC,oBAAoB,CAAAH,QAAA,eAC/B3C,IAAA,CAACF,IAAI,EAACqD,EAAE,CAAE,UAAUH,KAAK,CAACI,QAAQ,EAAG,CAACN,SAAS,CAAC,wBAAwB,CAAAH,QAAA,cACpE3C,IAAA,QACI8C,SAAS,CAAC,sBAAsB,CAChCO,GAAG,CAAEL,KAAK,CAACM,MAAM,EAAI,qCAAsC,CAC3DC,GAAG,CAAEP,KAAK,CAACQ,KAAK,EAAI,aAAc,CACrC,CAAC,CACA,CAAC,cACPtD,KAAA,QAAK4C,SAAS,CAAC,uBAAuB,CAAAH,QAAA,eAClC3C,IAAA,OAAA2C,QAAA,CAAKK,KAAK,CAACQ,KAAK,EAAI,aAAa,CAAK,CAAC,cACvCtD,KAAA,MAAAyC,QAAA,eACI3C,IAAA,WAAA2C,QAAA,CAAQ,gBAAc,CAAQ,CAAC,IAAC,CAACd,gBAAgB,CAACmB,KAAK,CAACS,QAAQ,CAAC,EAClE,CAAC,cACJvD,KAAA,MAAAyC,QAAA,eACI3C,IAAA,WAAA2C,QAAA,CAAQ,iCAAgB,CAAQ,CAAC,IAAC,CAACK,KAAK,CAACU,OAAO,EAAI,aAAa,CAAC,MACtE,EAAG,CAAC,cACJxD,KAAA,MAAAyC,QAAA,eACI3C,IAAA,WAAA2C,QAAA,CAAQ,mBAAiB,CAAQ,CAAC,IAAC,CAACK,KAAK,CAACW,OAAO,EAAI,aAAa,EACnE,CAAC,cACJzD,KAAA,MAAAyC,QAAA,eACI3C,IAAA,WAAA2C,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACK,KAAK,CAACY,WAAW,EAAI,aAAa,CAAC,SAC3D,CAAC,EAAAV,iBAAA,CAAAF,KAAK,CAACa,UAAU,UAAAX,iBAAA,iBAAhBA,iBAAA,CAAkBY,cAAc,CAAC,CAAC,GAAI,CAAC,CAAC,kBAC7C,EAAG,CAAC,cACJ9D,IAAA,MAAG8C,SAAS,CAAC,2BAA2B,CAAAH,QAAA,CAAEK,KAAK,CAACe,IAAI,EAAI,YAAY,CAAI,CAAC,EACxE,CAAC,GAxB+Bf,KAAK,CAACI,QAAQ,EAAIH,CAyBtD,CAAC,EACT,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA9C,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}