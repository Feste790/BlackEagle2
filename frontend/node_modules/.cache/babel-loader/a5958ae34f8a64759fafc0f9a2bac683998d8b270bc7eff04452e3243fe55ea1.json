{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Login from'./Login';import Register from'./Register';import Movies from'./Movies';import Series from'./Series';import Watched from'./Watched';import MovieDetails from'./MovieDetails';import Home from'./Home';import Header from'./Header';import Footer from'./Footer';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[movies,setMovies]=useState([]);const[searchQuery,setSearchQuery]=useState('');const apiUrl='http://localhost:5000';useEffect(()=>{const verifyToken=async()=>{const token=localStorage.getItem('access_token');if(token){try{// Weryfikujemy token przez wywo�anie endpointu /movies\nconst response=await fetch(`${apiUrl}/movies`,{method:'GET',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`}});if(response.ok){// Token jest wa�ny, ustawiamy stan autoryzacji\nconst data=await response.json();setMovies(data);setIsAuthenticated(true);}else{// Token jest niewa�ny, usuwamy go i ustawiamy stan\nlocalStorage.removeItem('access_token');setIsAuthenticated(false);}}catch(err){console.error('B��d weryfikacji tokena:',err);localStorage.removeItem('access_token');setIsAuthenticated(false);}}else{setIsAuthenticated(false);}};verifyToken();},[apiUrl]);const filteredMovies=movies.filter(movie=>{var _movie$title;return(_movie$title=movie.title)===null||_movie$title===void 0?void 0:_movie$title.toLowerCase().includes(searchQuery.toLowerCase());});return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Router,{children:[isAuthenticated&&/*#__PURE__*/_jsx(Header,{searchQuery:searchQuery,setSearchQuery:setSearchQuery}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/home\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setIsAuthenticated:setIsAuthenticated,apiUrl:apiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setIsAuthenticated:setIsAuthenticated,apiUrl:apiUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:isAuthenticated?/*#__PURE__*/_jsx(Home,{filteredMovies:filteredMovies,apiUrl:apiUrl}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/movies\",element:isAuthenticated?/*#__PURE__*/_jsx(Movies,{filteredMovies:filteredMovies,apiUrl:apiUrl}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/series\",element:isAuthenticated?/*#__PURE__*/_jsx(Series,{filteredMovies:filteredMovies,apiUrl:apiUrl}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/watched\",element:isAuthenticated?/*#__PURE__*/_jsx(Watched,{filteredMovies:filteredMovies,apiUrl:apiUrl}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/movie/:id\",element:isAuthenticated?/*#__PURE__*/_jsx(MovieDetails,{apiUrl:apiUrl}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Register","Movies","Series","Watched","MovieDetails","Home","Header","Footer","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","movies","setMovies","searchQuery","setSearchQuery","apiUrl","verifyToken","token","localStorage","getItem","response","fetch","method","headers","Authorization","ok","data","json","removeItem","err","console","error","filteredMovies","filter","movie","_movie$title","title","toLowerCase","includes","className","children","path","element","to"],"sources":["C:/Users/karol/source/repos/Feste790/BlackEagle-New/Black-Eagle/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport Movies from './Movies';\r\nimport Series from './Series';\r\nimport Watched from './Watched';\r\nimport MovieDetails from './MovieDetails';\r\nimport Home from './Home';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [movies, setMovies] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const apiUrl = 'http://localhost:5000';\r\n\r\n    useEffect(() => {\r\n        const verifyToken = async () => {\r\n            const token = localStorage.getItem('access_token');\r\n            if (token) {\r\n                try {\r\n                    // Weryfikujemy token przez wywo�anie endpointu /movies\r\n                    const response = await fetch(`${apiUrl}/movies`, {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: `Bearer ${token}`,\r\n                        },\r\n                    });\r\n                    if (response.ok) {\r\n                        // Token jest wa�ny, ustawiamy stan autoryzacji\r\n                        const data = await response.json();\r\n                        setMovies(data);\r\n                        setIsAuthenticated(true);\r\n                    } else {\r\n                        // Token jest niewa�ny, usuwamy go i ustawiamy stan\r\n                        localStorage.removeItem('access_token');\r\n                        setIsAuthenticated(false);\r\n                    }\r\n                } catch (err) {\r\n                    console.error('B��d weryfikacji tokena:', err);\r\n                    localStorage.removeItem('access_token');\r\n                    setIsAuthenticated(false);\r\n                }\r\n            } else {\r\n                setIsAuthenticated(false);\r\n            }\r\n        };\r\n\r\n        verifyToken();\r\n    }, [apiUrl]);\r\n\r\n    const filteredMovies = movies.filter((movie) =>\r\n        movie.title?.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <Router>\r\n                {isAuthenticated && <Header searchQuery={searchQuery} setSearchQuery={setSearchQuery} />}\r\n                <Routes>\r\n                    <Route path=\"/\" element={<Navigate to=\"/home\" />} />\r\n                    <Route\r\n                        path=\"/login\"\r\n                        element={<Login setIsAuthenticated={setIsAuthenticated} apiUrl={apiUrl} />}\r\n                    />\r\n                    <Route\r\n                        path=\"/register\"\r\n                        element={<Register setIsAuthenticated={setIsAuthenticated} apiUrl={apiUrl} />}\r\n                    />\r\n                    <Route\r\n                        path=\"/home\"\r\n                        element={\r\n                            isAuthenticated ? (\r\n                                <Home filteredMovies={filteredMovies} apiUrl={apiUrl} />\r\n                            ) : (\r\n                                <Navigate to=\"/login\" />\r\n                            )\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/movies\"\r\n                        element={\r\n                            isAuthenticated ? (\r\n                                <Movies filteredMovies={filteredMovies} apiUrl={apiUrl} />\r\n                            ) : (\r\n                                <Navigate to=\"/login\" />\r\n                            )\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/series\"\r\n                        element={\r\n                            isAuthenticated ? (\r\n                                <Series filteredMovies={filteredMovies} apiUrl={apiUrl} />\r\n                            ) : (\r\n                                <Navigate to=\"/login\" />\r\n                            )\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/watched\"\r\n                        element={\r\n                            isAuthenticated ? (\r\n                                <Watched filteredMovies={filteredMovies} apiUrl={apiUrl} />\r\n                            ) : (\r\n                                <Navigate to=\"/login\" />\r\n                            )\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/movie/:id\"\r\n                        element={\r\n                            isAuthenticated ? <MovieDetails apiUrl={apiUrl} /> : <Navigate to=\"/login\" />\r\n                        }\r\n                    />\r\n                </Routes>\r\n                <Footer />\r\n            </Router>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}